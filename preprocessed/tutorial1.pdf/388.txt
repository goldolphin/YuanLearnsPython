【PG】362　　第 24章　计算机仿真

【PG】代码清单 24-4　VirtualPet.py

【PG】import sys, pickle,datetime
from PyQt4 import QtCore, QtGui, uic

fromclass, baseclass = uic.loadUiType("mainwindow.ui")

class MyForm(baseclass, formclass):
    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self, parent)
        self.setupUi(self )
        self.doctor = False
        self.walking = False                                           
        self.sleeping = False                                          
        self.playing = False                                           
        self.eating = False                                            
        self.time_cycle = 0                                            
        self.hunger = 0                                                
        self.happiness  = 8                                            
        self.health = 8                                                
        self.forceAwake = False
        self.sleepImages = ["sleep1.gif","sleep2.gif","sleep3.gif",    
                            "sleep4.gif" ]
        self.eatImages = ["eat1.gif", "eat2.gif"]                      
        self.walkImages = ["walk1.gif", "walk2.gif", "walk3.gif",      
                           "walk4.gif"]                                
        self.playImages = ["play1.gif", "play2.gif"]                  
        self.doctorImages = ["doc1.gif", "doc2.gif"]                   
        self.nothingImages  = ["pet1.gif", "pet2.gif", "pet3.gif"]  
        self.imageList = self.nothingImages        
        self.imageIndex = 0
        self.actionStop.triggered.connect(self.stop_Click)        
        self.actionFeed.triggered.connect(self.feed_Click)             
        self.actionWalk.triggered.connect(self.walk_Click)             
        self.actionPlay.triggered.connect(self.play_Click)            
        self.actionDoctor.triggered.connect(self.doctor_Click)        
        self.myTimer1 = QtCore.QTimer(self)   
        self.myTimer1.start(500)                                       
        self.myTimer1.timeout.connect(self.animation_timer)            
                                                                       
        self.myTimer2 = QtCore.QTimer(self)                           
        self.myTimer2.start(5000)                                      
        self.myTimer2.timeout.connect(self.tick_timer)                
                                                  
        filehandle = True        
        try:                                                      
            file = open("savedata_vp.pkl", "r")  
        except:                                   
            filehandle = False                                         
        if filehandle:
            save_lis t = pickle.load(file)    
            file.close()初始化值