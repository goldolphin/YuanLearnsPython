【PG】第 22章 文件输入与输出

【PG】更正！即使一个文件不存在，也可以打开这个文件完成追加。创建一个新的空白文件就可以了呀！如果使用 'a'表示追加模式，文件名必须是硬盘上某个已经存在的文件的名字，否则你会得到一条错误消息。这是因为，追加是指增加到一个现有的文件。

【PG】卡特又说对了！如果使用 'w'表示写模式，会有两种可能：如果文件已经存在，文件中的所有内容都会丢失，替换为现在写入的内容；如果文件不存在，会创建一个同名的新文件，你写的所有内容会被放入这个新文件中。

【PG】下面来看一些例子。

【PG】追加到文件

【PG】首先，还是使用前面创建的 notes.txt文件，为它追加一些内容。下面增加一行“Spend allowance”。完成readlines()例子时如果你仔细观察，可能已经注意到最后一行末尾没有\n，也就是说没有换行符。所以现在需要增加一个换行符，然后再增加我们的新字符串。要把字符串写入文件，需要使用write()方法，如代码清单22-3所示。

【PG】代码清单22-3　使用追加模式

todo_list = open('notes.txt', 'a')
todo_list.write('\nSpend allowance')
todo_list.close()

【PG】读文件时，我们说过一旦完成就应当关闭文件。这一点在写文件时更为重要，写文件完成时一定要使用close()。这是因为，只有使用close()关闭文件，你所做的修改才会真正保存到文件中。

【PG】现在来看一个使用写模式来写文件的例子。我们将打开一个目前硬盘上还没有的文件。键入代码清单22-4中的程序，然后运行。

【PG】代码清单22-4　使用写模式

my_file = open('new_notes.txt', 'w')
my_file.close()

【PG】以追加模式打开文件
将字符串加到最后
关闭文件

【PG】图灵社区会员FreeLink专享 尊重版权