【PG】第 20章 更多 GUI

PyQt内置了一种创建和编辑菜单的方式。如果你在Designer的左上角找一下，会看到Type Here（在此输入），这就是创建菜单的地方。
在很多程序中，第一个菜单项都是File（文件）菜单，所以我们也从这个菜单开始。点击写有Type Here的区域，输入File，然后按回车（Enter）。你应该可以看到File菜单出现了，同时在其旁边和下面还有可以输入更多菜单的区域，如右图所示。

增加菜单项
在File菜单下，我们要添加一个Exit（退出）菜单项。在File下方写有Type Here的区域输入Exit，然后按回车。
现在我们来添加一个菜单项用于转换温度（假如用户不想使用按钮的话）。在File菜单右侧写有Type Here的区域，输入Convert，然后在下方分别创建两个菜单项：C to F（摄氏转华氏）和F to C（华氏转摄氏）。完成之后的样子应该像右图这样：
如果你看一下Qt Designer窗口右上角的对象查看器（Object Inspector），会看到这样的东西（如右图所示）：
你可以看到File和Convert（转换）菜单，以及Exit、C to F和F to C菜单项。
在PyQt的术语中，菜单项是QAction类的实例。这样命名是有含义的，因为你希望在选中菜单项的时候有一些“行为”（action）发生。
将你修改过的Designer文件保存为tempconv_menu.ui。

【PG】现在你有了菜单项（或者说行为），你需要将它们的事件绑定（或连接）到事件处理器。对于C to F和F to C菜单项来说，我们已经有了事件处理器，即我们之前为按钮编写的事件处理器。我们希望点击菜单项时发生的事情和点击按钮一样。所以只需要将菜单项和之前的事件处理器连接起来即可。

在Mac上，你还需要将菜单栏对象的nativeMenuBar属性勾选掉。（它应该是属性编辑器中的最后一个属性。）否则菜单会与Python的主菜单冲突，PyQt程序的File（文件）菜单会消失。

图灵社区会员FreeLink专享 尊重版权